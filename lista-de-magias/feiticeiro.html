<!DOCTYPE html>
<html lang="pt-BR">
<?php

$conjuracao = true;
$popover = true;
$getObj = htmlspecialchars($_GET["nome"]);

if ($conjuracao == true) {
	$jsonUrl = file_get_contents('https://5esrd.azurewebsites.net/data/magias-noescape.json');
	$magiasJson = json_decode($jsonUrl,true);
}

$pageName = 'lista-de-magias-feiticeiro';
$pageTitle = 'Feiticeiro - Lista de Magias';
$pageGroup = 'listasMagias';

/** Função para retirar os acentos e letras maisculas dos nomes das magias */

function remove_accents($string) {
    if ( !preg_match('/[:\x80-\xff]/', $string) )
        return $string;

    $chars = array(
    // Decompositions for Latin-1 Supplement
    chr(195).chr(128) => 'a', chr(195).chr(129) => 'a',
    chr(195).chr(130) => 'a', chr(195).chr(131) => 'a',
    chr(195).chr(132) => 'a', chr(195).chr(133) => 'a',
    chr(195).chr(135) => 'c', chr(195).chr(136) => 'e',
    chr(195).chr(137) => 'e', chr(195).chr(138) => 'e',
    chr(195).chr(139) => 'e', chr(195).chr(140) => 'i',
    chr(195).chr(141) => 'i', chr(195).chr(142) => 'i',
    chr(195).chr(143) => 'i', chr(195).chr(145) => 'n',
    chr(195).chr(146) => 'o', chr(195).chr(147) => 'o',
    chr(195).chr(148) => 'o', chr(195).chr(149) => 'o',
    chr(195).chr(150) => 'o', chr(195).chr(153) => 'u',
    chr(195).chr(154) => 'u', chr(195).chr(155) => 'u',
    chr(195).chr(156) => 'u', chr(195).chr(157) => 'y',
    chr(195).chr(159) => 's', chr(195).chr(160) => 'a',
    chr(195).chr(161) => 'a', chr(195).chr(162) => 'a',
    chr(195).chr(163) => 'a', chr(195).chr(164) => 'a',
    chr(195).chr(165) => 'a', chr(195).chr(167) => 'c',
    chr(195).chr(168) => 'e', chr(195).chr(169) => 'e',
    chr(195).chr(170) => 'e', chr(195).chr(171) => 'e',
    chr(195).chr(172) => 'i', chr(195).chr(173) => 'i',
    chr(195).chr(174) => 'i', chr(195).chr(175) => 'i',
    chr(195).chr(177) => 'n', chr(195).chr(178) => 'o',
    chr(195).chr(179) => 'o', chr(195).chr(180) => 'o',
    chr(195).chr(181) => 'o', chr(195).chr(182) => 'o',
    chr(195).chr(182) => 'o', chr(195).chr(185) => 'u',
    chr(195).chr(186) => 'u', chr(195).chr(187) => 'u',
    chr(195).chr(188) => 'u', chr(195).chr(189) => 'y',
    chr(195).chr(191) => 'y', chr(58) => ''
    );

    $string = strtr($string, $chars);

    return $string;
}

?>

<?php include('/home/site/wwwroot/partial/head.php'); ?>

<body>

<?php include('/home/site/wwwroot/partial/header.php'); ?>

<div class="container">
	<div class="row">
		<div class="col-xl">
			<nav aria-label="breadcrumb">
				<ol class="breadcrumb">
					<li class="breadcrumb-item"><a href="https://5esrd.azurewebsites.net/">Home</a></li>
					<li class="breadcrumb-item"><a href="javascript:history.back()">Lista de Magias</a></li>
					<li class="breadcrumb-item active" aria-current="page">Feiticeiro</li>
				</ol>
			</nav>
		</div>
	</div>
</div>

<div class="container" style="padding-bottom: 40px;">
	<div class="main-filter-container">
		<div class="main-filter">
			<ul class="main-list">
				<li class="item all-items class all-classes">
					<div onclick="window.location='/lista-de-magias.php'">
						<img src="https://5esrd.azurewebsites.net/imagens/icon-magias-todos.png" class="img-fluid">
						<span>Todas</span>
					</div>
				</li>
				<li class="item all-items class all-classes">
					<div onclick="window.location='/lista-de-magias/bardo.php'">
					<img src="https://5esrd.azurewebsites.net/imagens/icon-magias-bardo2.png" class="img-fluid">
					<span>Bardo</span>
					</div>
				</li>
				<li class="item all-items class all-classes">
					<div onclick="window.location='/lista-de-magias/bruxo.php'">
					<img src="https://5esrd.azurewebsites.net/imagens/icon-magias-bruxo.png" class="img-fluid">
					<span>Bruxo</span>
					</div>
				</li>
				<li class="item all-items class all-classes">
					<div onclick="window.location='/lista-de-magias/clerigo.php'">
					<img src="https://5esrd.azurewebsites.net/imagens/icon-magias-clerigo.png" class="img-fluid">
					<span>Clérigo</span>
					</div>
				</li>
				<li class="item all-items class all-classes">
					<div onclick="window.location='/lista-de-magias/druida.php'">
					<img src="https://5esrd.azurewebsites.net/imagens/icon-magias-druida2.png" class="img-fluid">
					<span>Druida</span>
					</div>
				</li>
				<li class="item all-items class all-classes spellListActive">
					<div onclick="window.location='/lista-de-magias/feiticeiro.php'">
					<img src="https://5esrd.azurewebsites.net/imagens/icon-magias-feiticeiro.png" class="img-fluid">
					<span>Feiticeiro</span>
					</div>
				</li>
				<li class="item all-items class all-classes">
					<div onclick="window.location='/lista-de-magias/guardiao.php'">
					<img src="https://5esrd.azurewebsites.net/imagens/icon-magias-guardiao.png" class="img-fluid">
					<span>Guardião</span>
					</div>
				</li>
				<li class="item all-items class all-classes">
					<div onclick="window.location='/lista-de-magias/ladino.php'">
					<img src="https://5esrd.azurewebsites.net/imagens/icon-magias-ladino.png" class="img-fluid">
					<span>Ladino</span>
					</div>
				</li>
				<li class="item all-items class all-classes">
					<div onclick="window.location='/lista-de-magias/mago.php'">
					<img src="https://5esrd.azurewebsites.net/imagens/icon-magias-mago.png" class="img-fluid">
					<span>Mago</span>
					</div>
				</li>
				<li class="item all-items class all-classes">
					<div onclick="window.location='/lista-de-magias/paladino.php'">
					<img src="https://5esrd.azurewebsites.net/imagens/icon-magias-paladino.png" class="img-fluid">
					<span>Paladino</span>
					</div>
				</li>
			</ul>
		</div>
	</div>
</div>

<div id="lista-de-magias" class="container">
	<h1 class="titulo-detalhes" style="margin-bottom: 22px;">Lista de Magias</h1>

	<?php

		$filterMagia = array_filter($magiasJson["data"], function($e) {
			return $e['feiticeiro'] == true;
		});
		if (count($filterMagia)) {
			echo '<table id="table-lista-de-magias" class="display table table-bordered table-striped" style="font-size: 0.9em; margin-bottom: 35px">';
			echo '<thead>';
			echo '<tr>';
			echo '<th scope="col" class="align-middle">Círculo</th>';
			echo '<th scope="col" class="align-middle">Nome</th>';
			echo '<th scope="col" class="align-middle" style="display:none;">Em Inglês</th>';
			echo '<th scope="col" class="align-middle">Duração</th>';
			echo '<th scope="col" class="align-middle">Alcance</th>';
			echo '<th scope="col" class="align-middle">Tempo de Conjuração</th>';
			echo '</tr>';
			echo '</thead>';
			echo '<tbody>';

			foreach ($filterMagia as $entry) {
				echo '<tr ';
				echo 'onclick="window.location=\'';
				$stepOne = $entry["nome"];
				$stepTwo = preg_replace('#[ /]+#', "-", $stepOne);
				$stepThree = remove_accents($stepTwo);
				echo 'https://5esrd.azurewebsites.net/magias.php?nome='.strtolower($stepThree);
				echo '\';">';
				echo '<th scope="row" class="text-center align-middle magiaCirculoCol">';
				if ($entry["circulo"] == 0) {echo 'Truque';} else echo $entry["circulo"].'º';
				echo '</th>';

				echo '<td>';
				echo '<div class="magiaNomeRow1">'.$entry["nome"];
				if ($entry["concentracao"] == true) {echo ' <span class="concentSpan"></span></div>';}
				echo '<div class="magiaNomeRow2">';
				echo $entry["escola"].' • '.$entry["componentes"];
				echo '</div>';
				echo '</td>';

				echo '<td class="align-middle magiaInglesCol" style="display:none;">'.$entry["nome_ingles"].'</td>';

				echo '<td class="align-middle magiaOutrasCol">'.$entry["duracao"].'</td>';

				echo '<td class="align-middle magiaOutrasCol">'.$entry["alcance"].'</td>';

				echo '<td class="align-middle magiaOutrasCol">'.mb_strimwidth($entry["tempo_conjuracao"], 0, 14, " (...)").'</td>';
				
				echo '</tr>';
			}

			echo '</tbody>';
			echo '</table>';
		}
	?>

</div>


<?php include('/home/site/wwwroot/partial/footer.php'); ?>